---
title: Token Usage, pui Prefix, and Hardcoded vs Tokenized Properties
impact: CRITICAL
impactDescription: determines theme-ability and brand switching correctness
tags: styling, tokens, pui-prefix, hardcoded, structural, thematic, tailwind
---

## Token Usage, pui Prefix, and Hardcoded vs Tokenized Properties

Components in `@perimetre/ui` must use the `pui:` prefix on all Tailwind utilities and reference semantic tokens for all visual properties. Structural properties are hardcoded.

### The pui: Prefix

All Tailwind utilities in `@perimetre/ui` MUST use the `pui:` prefix. This prevents utility conflicts when the library is consumed by projects with their own Tailwind configuration.

**Correct:**

```tsx
<div className="pui:bg-pui-interactive-primary pui:rounded-pui-button pui:inline-flex pui:items-center">
```

**Incorrect:**

```tsx
// WRONG: No pui: prefix
<div className="bg-blue-500 rounded-lg inline-flex items-center">

// WRONG: Mixing prefixed and unprefixed
<div className="pui:bg-pui-interactive-primary rounded-lg">
```

### Token Reference in Utilities

Semantic token utilities follow the pattern `pui:{property}-pui-{token-name}`:

```
pui:bg-pui-interactive-primary     → background-color: var(--pui-color-interactive-primary)
pui:text-pui-fg-default            → color: var(--pui-color-fg-default)
pui:rounded-pui-button             → border-radius: var(--pui-radius-button)
pui:shadow-pui-button              → box-shadow: var(--pui-shadow-button)
pui:duration-pui-normal            → transition-duration: var(--pui-duration-normal)
```

These utilities are generated by the `@theme inline` directive in `brands/tailwind.css`:

```css
@theme inline {
  --color-pui-interactive-primary: var(--pui-color-interactive-primary);
  --radius-pui-button: var(--pui-radius-button);
  --shadow-pui-button: var(--pui-shadow-button);
}
```

### What to Tokenize vs Hardcode

**Always tokenize (thematic - changes between brands):**

| Property            | Token Example                     | Reasoning                        |
| ------------------- | --------------------------------- | -------------------------------- |
| Background colors   | `pui:bg-pui-interactive-primary`  | Core brand expression            |
| Text colors         | `pui:text-pui-fg-default`         | Must coordinate with backgrounds |
| Border colors       | `pui:border-pui-border-default`   | Visual weight varies             |
| Border radius       | `pui:rounded-pui-button`          | Shape language (pill vs sharp)   |
| Box shadows         | `pui:shadow-pui-button`           | Depth perception varies          |
| Font weight         | `pui:font-bold` (via token)       | Visual weight varies             |
| Letter spacing      | `pui:tracking-widest` (via token) | Typography feel                  |
| Text transform      | `pui:uppercase` (via token)       | Formality level                  |
| Transition duration | `pui:duration-pui-normal`         | Motion personality               |

**Always hardcode (structural - never changes between brands):**

| Property            | Hardcoded Example                     | Reasoning               |
| ------------------- | ------------------------------------- | ----------------------- |
| Display             | `pui:inline-flex`                     | Layout structure        |
| Alignment           | `pui:items-center pui:justify-center` | Positioning logic       |
| Cursor              | `pui:cursor-pointer`                  | Interaction affordance  |
| Position            | `pui:relative`                        | Positioning context     |
| Width patterns      | `pui:w-full`                          | Sizing relationships    |
| Overflow            | `pui:overflow-hidden`                 | Content clipping        |
| Pointer events      | `pui:pointer-events-none`             | Behavior control        |
| Transition property | `pui:transition-shadow`               | Which property animates |

### The Decision Rule

> **Tokens control how something LOOKS. Hardcoded values control how something WORKS.**

If changing the value would require a design discussion, it's a token.
If changing the value would require a code architecture discussion, hardcode it.

### Hover and State Styling

Use Tailwind state modifiers with the `pui:` prefix:

```tsx
'pui:hover:shadow-pui-button-hover'; // Shadow changes on hover
'pui:focus-visible:shadow-pui-input-focus'; // Focus ring
'pui:disabled:opacity-50'; // Disabled state (structural)
```

### Arbitrary Values

When a specific value is needed that isn't in the token system, use Tailwind's arbitrary value syntax with the `pui:` prefix:

```tsx
'pui:leading-[1.335rem]'; // Specific line-height
'pui:tracking-[0.1125rem]'; // Specific letter-spacing
```

Only use arbitrary values for values that:

1. Don't change between brands
2. Are too specific to warrant a token
3. Are used by only one or two components

If the same arbitrary value appears in 3+ components, create a token.

### Pseudo-Element Styling

Some components need custom pseudo-element utilities. These are defined in the Tailwind CSS:

```css
@layer pui.tw.utilities {
  [data-pui-brand] .before\:pui\:content-\[\""\]\:before {
    content: '';
  }
  [data-pui-brand] .before\:pui\:bg-pui-interactive-primary:before {
    background-color: var(--pui-color-interactive-primary);
  }
}
```

Usage in components:

```tsx
'before:pui:content-[""] before:pui:bg-pui-interactive-primary';
```

### Custom Variants for Brand Scoping

Tailwind custom variants scope styles to specific brands:

```css
@custom-variant pui-acorn (&:where([data-pui-brand=acorn], [data-pui-brand=acorn] *));
@custom-variant pui-sprig (&:where([data-pui-brand=sprig], [data-pui-brand=sprig] *));
```

Use sparingly. Prefer CSS token overrides over brand-specific utility classes:

```tsx
// PREFERRED: Token handles the difference
'pui:bg-pui-interactive-primary'; // Resolves differently per brand via CSS tokens

// LAST RESORT: Brand-specific utility (avoid when possible)
'pui-sprig:pui:bg-green-500'; // Only use when token approach is insufficient
```

### Group-Based Styling

For components like checkboxes where parent state affects child styling:

```css
@custom-variant group-has-checked (&:is(:where(.pui\:group):has(:checked) *));
@custom-variant group-has-disabled (&:is(:where(.pui\:group):has(:disabled) *));
```

```tsx
// Parent has pui:group class
<label className="pui:group">
  <input type="checkbox" />
  {/* Child responds to parent's :checked state */}
  <span className="group-has-checked:pui:bg-pui-control-checked-bg" />
</label>
```
